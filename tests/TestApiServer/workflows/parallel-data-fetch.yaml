apiVersion: workflow.example.com/v1
kind: Workflow
metadata:
  name: parallel-data-fetch
  namespace: test
spec:
  description: Fetch data from multiple endpoints in parallel
  input:
    type: object
    properties:
      productId:
        type: string
    required:
      - productId
  tasks:
    - id: get-strings
      taskRef: getstrings

    - id: get-numbers
      taskRef: getnumbers

    - id: get-product
      taskRef: getproduct
      input:
        id: "{{input.productId}}"

    - id: get-stock
      taskRef: getstocklevel
      input:
        id: "{{input.productId}}"

  output:
    strings: "{{tasks.get-strings.output.items}}"
    numbers: "{{tasks.get-numbers.output.items}}"
    product: "{{tasks.get-product.output}}"
    stock: "{{tasks.get-stock.output}}"
